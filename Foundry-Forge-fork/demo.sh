#!/bin/bash

echo "ğŸ¯ Foundry Fork é¡¹ç›®æ¼”ç¤º - æ— éœ€å¤–éƒ¨ RPC"
echo "================================"

echo ""
echo "ğŸ“‹ é¡¹ç›®æ¦‚è¿°:"
echo "è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Foundry Fork é¡¹ç›®ï¼Œæ¼”ç¤ºå¦‚ä½•:"
echo "  âœ… Fork ä¸»ç½‘åˆ°æŒ‡å®šåŒºå—é«˜åº¦"
echo "  âœ… ä¸çœŸå®DeFiåè®®äº¤äº’"  
echo "  âœ… è¿›è¡Œæ—¶é—´æ—…è¡Œæµ‹è¯•"
echo "  âœ… æ¨¡æ‹Ÿå¤æ‚äº¤æ˜“åœºæ™¯"

echo ""
echo "ğŸ“ é¡¹ç›®ç»“æ„:"
find . -name "*.sol" -o -name "*.sh" -o -name "*.toml" | head -10 | while read file; do
    echo "  ğŸ“„ $file"
done

echo ""
echo "ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½:"
echo "  ğŸ”§ ForkTester.sol - ä¸»è¦åˆçº¦ï¼ŒåŒ…å«æ‰€æœ‰Forkæµ‹è¯•åŠŸèƒ½"
echo "  ğŸ§ª ForkTest.t.sol - å®Œæ•´çš„æµ‹è¯•å¥—ä»¶"
echo "  ğŸš€ start_fork.sh - ä¸€é”®å¯åŠ¨Forkç½‘ç»œ"
echo "  ğŸ“¦ deploy_fork.sh - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬"
echo "  ğŸ§ª run_tests.sh - æµ‹è¯•è¿è¡Œè„šæœ¬"

echo ""
echo "ğŸ” åˆçº¦åŠŸèƒ½é¢„è§ˆ:"
echo "contract ForkTester {"
echo "  // æ£€æŸ¥ä»£å¸ä½™é¢"
echo "  function checkTokenBalance(address token, address user) external"
echo "  "
echo "  // æ¨¡æ‹Ÿä»£å¸è½¬è´¦"
echo "  function simulateTransfer(address token, address from, address to, uint256 amount) external"
echo "  "
echo "  // è·å–åŒºå—ä¿¡æ¯"
echo "  function getBlockInfo() external view returns (uint256, uint256, bytes32)"
echo "  "
echo "  // æ£€æŸ¥æ˜¯å¦åœ¨Forkç¯å¢ƒ"
echo "  function isForkedNetwork() external view returns (bool)"
echo "}"

echo ""
echo "ğŸš€ ä½¿ç”¨æ–¹æ³•:"
echo "1. é…ç½® RPC URL:"
echo "   cp .env.example .env"
echo "   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ Alchemy/Infura API Key"
echo ""
echo "2. å¯åŠ¨ Fork ç½‘ç»œ:"
echo "   ./start_fork.sh mainnet 18500000"
echo ""
echo "3. è¿è¡Œæµ‹è¯•:"
echo "   ./run_tests.sh all"
echo ""
echo "4. éƒ¨ç½²åˆçº¦:"
echo "   ./deploy_fork.sh"

echo ""
echo "ğŸ’¡ é«˜çº§ç”¨æ³•ç¤ºä¾‹:"
echo "# Fork ç‰¹å®šåŒºå—è¿›è¡Œå†å²åˆ†æ"
echo "anvil --fork-url \$RPC_URL --fork-block-number 18000000"
echo ""
echo "# åœ¨æµ‹è¯•ä¸­è¿›è¡Œæ—¶é—´æ—…è¡Œ"
echo "vm.roll(block.number + 100);  // å‰è¿›100ä¸ªåŒºå—"
echo "vm.warp(block.timestamp + 3600);  // å‰è¿›1å°æ—¶"
echo ""
echo "# ç»™ä»»æ„åœ°å€åˆ†é…èµ„äº§è¿›è¡Œæµ‹è¯•" 
echo "vm.deal(testAccount, 100 ether);  // åˆ†é…ETH"
echo "deal(USDC, testAccount, 10000 * 1e6);  // åˆ†é…USDC"

echo ""
echo "ğŸ¯ å®é™…åº”ç”¨åœºæ™¯:"
echo "  ğŸ“Š DeFiåè®®æµ‹è¯•å’Œé›†æˆ"
echo "  ğŸ”„ MEVç­–ç•¥å›æµ‹å’ŒéªŒè¯"  
echo "  ğŸ›¡ï¸ æ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡"
echo "  ğŸ“ˆ å†å²æ•°æ®åˆ†æå’Œé‡ç°"
echo "  ğŸ§ª å¤æ‚äº¤æ˜“é€»è¾‘æµ‹è¯•"

echo ""
echo "âš ï¸  æ³¨æ„äº‹é¡¹:"
echo "  â€¢ éœ€è¦æœ‰æ•ˆçš„ä»¥å¤ªåŠ RPC URL (Alchemy/Infura/QuickNodeç­‰)"
echo "  â€¢ Fork ä¼šæ¶ˆè€—ä¸€å®šå†…å­˜å’Œå¸¦å®½"
echo "  â€¢ å…è´¹ RPC æœåŠ¡é€šå¸¸æœ‰è¯·æ±‚é€Ÿç‡é™åˆ¶"
echo "  â€¢ å¤ªè€çš„åŒºå—å¯èƒ½æ— æ³•è®¿é—®"

echo ""
echo "âœ… é¡¹ç›®æ­å»ºå®Œæˆ!"
echo "ğŸ“– æŸ¥çœ‹ readme.txt è·å–è¯¦ç»†æ–‡æ¡£"
echo "ğŸ”§ é…ç½® .env æ–‡ä»¶åå³å¯å¼€å§‹ä½¿ç”¨"

echo ""
echo "ğŸŒŸ è¿™ä¸ªé¡¹ç›®æ¼”ç¤ºäº†å®Œæ•´çš„ Foundry Fork å·¥ä½œæµï¼Œæ˜¯å­¦ä¹  Web3 å¼€å‘çš„ç»ä½³å®è·µï¼"